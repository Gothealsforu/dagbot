<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Dagbot by anirbanmu</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/anirbanmu/dagbot">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/anirbanmu/dagbot/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/anirbanmu/dagbot/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Dagbot</h1>
          <p>An IRC Markov chain bot</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/anirbanmu">anirbanmu</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a id="dagbot" class="anchor" href="#dagbot" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>dagbot</h1>

<p>An IRC Markov Chain chatbot with a simple pluggable command system using Python 2.7.</p>

<h2>
<a id="intro" class="anchor" href="#intro" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Intro</h2>

<p>Markov bots work on based on the simple idea of markov chains. They usually require a substantially large corpus (flat text file with known good phrases / sentences). One could call this the "brain" of dagbot. Without a large corpus, markov bots will usually generate gibberish phrases that look nothing like what a human would say.</p>

<h2>
<a id="details" class="anchor" href="#details" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Details</h2>

<p>Commands have a very simple interface which tell the bot what keywords are triggers &amp; what class should handle said keywords.</p>

<p>All configuration data for the bot is defined &amp; validated via <a href="http://json-schema.org/">jsonschema</a>. The <code>config_schema.json</code> file defines the main configuration data that dagbot uses (irc channels, response rate etc). It also serves as documentation of configuration format &amp; what each setting means.</p>

<p>Configuration data for each command is also configurable but by default goes in <code>commands/config</code> directory. Command config is totally separate from main bot configuration and is fully customizable. At runtime, all commands are pulled in automatically from the <code>commands</code> directory.</p>

<p>Logic for markov responses is fairly simple. First the <a href="https://github.com/clips/pattern">pattern</a> library is used to try to find interesting words in a phrase like the subject. If none can be found, we fall back to just picking the first n (markov chain length) words of the phrase that was sent to the bot.</p>

<p>The brain file is just a flat text file of sentences that have been seen before (said by a human). Dagbot records all messages said in the IRC channels it joins (unless a channel is configured not to be recorded). This means the brain file you use will be modified when the bot is running. At runtime, the text file is parsed into actual markov chains which are stored in a <a href="https://www.sqlite.org/">sqlite3</a> backed dictionary. The database was used to save memory since using python's built in dictionary consumes massive amounts of memory.</p>

<p>Dagbot depends on the following libraries:</p>

<ul>
<li><a href="https://pypi.python.org/pypi/Twisted">twisted</a></li>
<li><a href="https://pypi.python.org/pypi/icalendar">icalendar</a></li>
<li><a href="https://pypi.python.org/pypi/Pattern">pattern</a></li>
<li><a href="https://pypi.python.org/pypi/urllib3">urllib3</a></li>
<li><a href="https://pypi.python.org/pypi/msgpack-python">msgpack-python</a></li>
<li><a href="https://pypi.python.org/pypi/jsonschema">jsonschema</a></li>
<li><a href="https://pypi.python.org/pypi/tweepy">tweepy</a></li>
</ul>

<p>Running the following should install all the dependencies:</p>

<pre><code>pip install twisted icalendar pattern urllib3 msgpack-python jsonschema tweepy
</code></pre>

<p>More info on pip is <a href="https://pypi.python.org/pypi/pip">here</a> if something breaks.</p>

<p>After you've tweaked the configuration file to your liking, you can start the bot with:</p>

<pre><code>python sadface.py /path/to/config.json
</code></pre>

<p>There is no issue with using <a href="http://pypy.org/">pypy</a> with dagbot instead of CPython. In fact I fully recommend using pypy!</p>

<p>Dagbot is obviously originally derived from sadface but has at this point diverged &amp; grown substantially from the original code.</p>

<p>You can find dagbot chatting away on a number of channels on <a href="https://snoonet.org/">snoonet</a> if you're interested in seeing how well it performs. The <code>#f1</code> channel is quite familiar with dagbot especially due to the countdown command.</p>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>
<p>Ben Keith</p>

<ul>
<li>Original author of the markov portion of sadface!</li>
</ul>
</li>
<li>
<p>Eric Florenzano</p>

<ul>
<li>sadface derives heavily from his MomBot Markov bot code</li>
<li><a href="http://eflorenzano.com/blog/2008/11/16/writing-markov-chain-irc-bot-twisted-and-python/">http://eflorenzano.com/blog/2008/11/16/writing-markov-chain-irc-bot-twisted-and-python/</a></li>
<li><a href="http://wayback.archive.org/web/20130106092748/http://eflorenzano.com/blog/2008/11/16/writing-markov-chain-irc-bot-twisted-and-python/">http://wayback.archive.org/web/20130106092748/http://eflorenzano.com/blog/2008/11/16/writing-markov-chain-irc-bot-twisted-and-python/</a></li>
</ul>
</li>
<li>
<p>hhokanson</p>

<ul>
<li>sadface's configuration methods derive from her AnonBot IRC anonymizer bot</li>
<li><a href="https://bitbucket.org/hhokanson/anonbot/src">https://bitbucket.org/hhokanson/anonbot/src</a></li>
</ul>
</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
